

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>C API &mdash; liblightnvm 0.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="liblightnvm 0.0.1 documentation" href="index.html"/>
        <link rel="next" title="Command-Line Interface" href="cli.html"/>
        <link rel="prev" title="Background" href="background.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> liblightnvm
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">C API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#geometry">Geometry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvm-geo">nvm_geo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-geo-pr">nvm_geo_pr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#buffer-management">Buffer Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvm-buf-alloc">nvm_buf_alloc</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-buf-fill">nvm_buf_fill</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-buf-pr">nvm_buf_pr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#device-management">Device Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvm-dev">nvm_dev</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-dev-open">nvm_dev_open</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-dev-close">nvm_dev_close</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-dev-attr-geo">nvm_dev_attr_geo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-dev-pr">nvm_dev_pr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bad-block-management">Bad Block Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvm-bbt">nvm_bbt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-bbt-get">nvm_bbt_get</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-bbt-set">nvm_bbt_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-bbt-mark">nvm_bbt_mark</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-bbt-free">nvm_bbt_free</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-bbt-pr">nvm_bbt_pr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-bbt-state-pr">nvm_bbt_state_pr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#physical-addressing">Physical Addressing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr">nvm_addr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-ret">nvm_ret</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-erase">nvm_addr_erase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-read">nvm_addr_read</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-write">nvm_addr_write</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-check">nvm_addr_check</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-gen2dev">nvm_addr_gen2dev</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-dev2gen">nvm_addr_dev2gen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-gen2lba">nvm_addr_gen2lba</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-lba2gen">nvm_addr_lba2gen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-gen2off">nvm_addr_gen2off</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-off2gen">nvm_addr_off2gen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-addr-pr">nvm_addr_pr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#logical-addressing">Logical Addressing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvm-lba-pread">nvm_lba_pread</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-lba-pwrite">nvm_lba_pwrite</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-block">Virtual Block</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk">nvm_vblk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-erase">nvm_vblk_erase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-read">nvm_vblk_read</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-write">nvm_vblk_write</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-pad">nvm_vblk_pad</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-pread">nvm_vblk_pread</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-pwrite">nvm_vblk_pwrite</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-alloc">nvm_vblk_alloc</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-alloc-set">nvm_vblk_alloc_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-alloc-line">nvm_vblk_alloc_line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-free">nvm_vblk_free</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-pr">nvm_vblk_pr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-attr-addrs">nvm_vblk_attr_addrs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-attr-naddrs">nvm_vblk_attr_naddrs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-attr-pos-read">nvm_vblk_attr_pos_read</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nvm-vblk-attr-pos-write">nvm_vblk_attr_pos_write</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-Line Interface</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">liblightnvm</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>C API</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/c.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="c-api">
<span id="sec-c-api"></span><h1>C API<a class="headerlink" href="#c-api" title="Permalink to this headline">¶</a></h1>
<p>C API to interact with an Open-Channel SSDs from user space.</p>
<div class="section" id="geometry">
<h2>Geometry<a class="headerlink" href="#geometry" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nvm-geo">
<h3>nvm_geo<a class="headerlink" href="#nvm-geo" title="Permalink to this headline">¶</a></h3>
<dl class="struct">
<dt id="c.nvm_geo">
<span class="target" id="liblightnvmstructnvm__geo"></span><em class="property">struct </em><code class="descname">nvm_geo</code><a class="headerlink" href="#c.nvm_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of device and virtual block geometry. </p>
<p><dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#liblightnvmliblightnvm_8h_1a389ec526902d589700da6a42fd4ab9c6"><span class="std std-ref">nvm_dev_attr_geo</span></a>, nvm_vblk_attr_geo </dd>
</dl>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt id="c.nvm_geo::nchannels">
<span class="target" id="liblightnvmstructnvm__geo_1a202afc3940fcf740e1628d4082b44c25"></span>size_t <code class="descname">nchannels</code><a class="headerlink" href="#c.nvm_geo::nchannels" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of channels on device. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::nluns">
<span class="target" id="liblightnvmstructnvm__geo_1ab9ea66e8dded890438425b744985cd68"></span>size_t <code class="descname">nluns</code><a class="headerlink" href="#c.nvm_geo::nluns" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of LUNs per channel. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::nplanes">
<span class="target" id="liblightnvmstructnvm__geo_1a0928993c813ac7977cb00b77d583cf8c"></span>size_t <code class="descname">nplanes</code><a class="headerlink" href="#c.nvm_geo::nplanes" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of planes per LUN. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::nblocks">
<span class="target" id="liblightnvmstructnvm__geo_1ab743264c6be0d5fa0ac71ca95b95d8ac"></span>size_t <code class="descname">nblocks</code><a class="headerlink" href="#c.nvm_geo::nblocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of blocks per plane. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::npages">
<span class="target" id="liblightnvmstructnvm__geo_1ac35e64684ff910d6a6c2e31add673753"></span>size_t <code class="descname">npages</code><a class="headerlink" href="#c.nvm_geo::npages" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of pages per block. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::nsectors">
<span class="target" id="liblightnvmstructnvm__geo_1a1fa8ed4fd3860b7721ff49e3d75e397f"></span>size_t <code class="descname">nsectors</code><a class="headerlink" href="#c.nvm_geo::nsectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of sectors per page. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::page_nbytes">
<span class="target" id="liblightnvmstructnvm__geo_1a75ffda38bc052d5a87ce637f0d37ec86"></span>size_t <code class="descname">page_nbytes</code><a class="headerlink" href="#c.nvm_geo::page_nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes per page. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::sector_nbytes">
<span class="target" id="liblightnvmstructnvm__geo_1a43fec2da1aa9a5a2998386132562994c"></span>size_t <code class="descname">sector_nbytes</code><a class="headerlink" href="#c.nvm_geo::sector_nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes per sector. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::meta_nbytes">
<span class="target" id="liblightnvmstructnvm__geo_1a8585f0920b8b563431b50c651059f124"></span>size_t <code class="descname">meta_nbytes</code><a class="headerlink" href="#c.nvm_geo::meta_nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes for out-of-bound / metadata. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::tbytes">
<span class="target" id="liblightnvmstructnvm__geo_1a274c96ba885358fec8d56c689ea0d4ff"></span>size_t <code class="descname">tbytes</code><a class="headerlink" href="#c.nvm_geo::tbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of bytes in geometry. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::vblk_nbytes">
<span class="target" id="liblightnvmstructnvm__geo_1a4b0829108bd69a14cf075ec27134bbaf"></span>size_t <code class="descname">vblk_nbytes</code><a class="headerlink" href="#c.nvm_geo::vblk_nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes per virtual block. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_geo::vpg_nbytes">
<span class="target" id="liblightnvmstructnvm__geo_1a7ec525b6d69dcbd3e3c48df5fa335ce2"></span>size_t <code class="descname">vpg_nbytes</code><a class="headerlink" href="#c.nvm_geo::vpg_nbytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes per virtual page. </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="nvm-geo-pr">
<h3>nvm_geo_pr<a class="headerlink" href="#nvm-geo-pr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_geo_pr">
<span class="target" id="liblightnvmliblightnvm_8h_1ae1e030c59680f889363fc51a6875dea4"></span>void <code class="descname">nvm_geo_pr</code><span class="sig-paren">(</span>const struct  <a class="reference internal" href="#c.nvm_geo" title="nvm_geo">nvm_geo</a>  *<em>&nbsp;geo</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_geo_pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints human readable representation of the given geometry. </p>
</dd></dl>

</div>
</div>
<div class="section" id="buffer-management">
<h2>Buffer Management<a class="headerlink" href="#buffer-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nvm-buf-alloc">
<h3>nvm_buf_alloc<a class="headerlink" href="#nvm-buf-alloc" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_buf_alloc">
<span class="target" id="liblightnvmliblightnvm_8h_1afc8ae47b17cfb871ea0abd60de7f521a"></span>void* <code class="descname">nvm_buf_alloc</code><span class="sig-paren">(</span>const struct  <a class="reference internal" href="#c.nvm_geo" title="nvm_geo">nvm_geo</a>  *<em>&nbsp;geo</em>, size_t<em>&nbsp;nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_buf_alloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a buffer aligned to match the given geometry. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>nbytes must be greater than zero and a multiple of geo.vpage_nbytes</dd>
<dt><strong>Return</strong></dt>
<dd>A pointer to the allocated memory. On error: NULL is returned and <code class="docutils literal"><span class="pre">errno</span></code> set appropriatly </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">geo</span></code>: The geometry to get alignment information from </li>
<li><code class="docutils literal"><span class="pre">nbytes</span></code>: The size of the allocated buffer in bytes</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-buf-fill">
<h3>nvm_buf_fill<a class="headerlink" href="#nvm-buf-fill" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_buf_fill">
<span class="target" id="liblightnvmliblightnvm_8h_1a16df329c7ba7ab06558e99ba50b28ec9"></span>void <code class="descname">nvm_buf_fill</code><span class="sig-paren">(</span>char *<em>&nbsp;buf</em>, size_t<em>&nbsp;nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_buf_fill" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills <code class="docutils literal"><span class="pre">buf</span></code> with chars A-Z. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">buf</span></code>: Pointer to the buffer to fill </li>
<li><code class="docutils literal"><span class="pre">nbytes</span></code>: Amount of bytes to fill in buf </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-buf-pr">
<h3>nvm_buf_pr<a class="headerlink" href="#nvm-buf-pr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_buf_pr">
<span class="target" id="liblightnvmliblightnvm_8h_1ab2d8c2634a332e3ca32055b17ef7b83e"></span>void <code class="descname">nvm_buf_pr</code><span class="sig-paren">(</span>char *<em>&nbsp;buf</em>, size_t<em>&nbsp;nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_buf_pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints <code class="docutils literal"><span class="pre">buf</span></code> to stdout. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">buf</span></code>: Pointer to the buffer to print </li>
<li><code class="docutils literal"><span class="pre">nbytes</span></code>: Amount of bytes of buf to print </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</div>
<div class="section" id="device-management">
<h2>Device Management<a class="headerlink" href="#device-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nvm-dev">
<h3>nvm_dev<a class="headerlink" href="#nvm-dev" title="Permalink to this headline">¶</a></h3>
<dl class="struct">
<dt id="c.nvm_dev">
<span class="target" id="liblightnvmstructnvm__dev"></span><em class="property">struct </em><code class="descname">nvm_dev</code><a class="headerlink" href="#c.nvm_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Opaque handle for NVM devices. </p>
</dd></dl>

</div>
<div class="section" id="nvm-dev-open">
<h3>nvm_dev_open<a class="headerlink" href="#nvm-dev-open" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_dev_open">
<span class="target" id="liblightnvmliblightnvm_8h_1adce9240457c84bf95e34ed9bb3cdf05e"></span>struct <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>* <code class="descname">nvm_dev_open</code><span class="sig-paren">(</span>const char *<em>&nbsp;dev_path</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_dev_open" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a handle to given device path. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>A handle to the device </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev_path</span></code>: Path of the device to open e.g. &#8220;/dev/nvme0n1&#8221;</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-dev-close">
<h3>nvm_dev_close<a class="headerlink" href="#nvm-dev-close" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_dev_close">
<span class="target" id="liblightnvmliblightnvm_8h_1a89508f4d3ba8a4ab8d7152e175702ad9"></span>void <code class="descname">nvm_dev_close</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_dev_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys device-handle. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to destroy </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-dev-attr-geo">
<h3>nvm_dev_attr_geo<a class="headerlink" href="#nvm-dev-attr-geo" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_dev_attr_geo">
<span class="target" id="liblightnvmliblightnvm_8h_1a389ec526902d589700da6a42fd4ab9c6"></span>const struct <a class="reference internal" href="#c.nvm_geo" title="nvm_geo">nvm_geo</a>* <code class="descname">nvm_dev_attr_geo</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_dev_attr_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the geometry of the given device. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>See struct <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref">nvm_geo</span></a> for the specifics of the returned geometry</dd>
<dt><strong>Return</strong></dt>
<dd>The geometry (struct <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref">nvm_geo</span></a>) of given device handle </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device to obtain the geometry of</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-dev-pr">
<h3>nvm_dev_pr<a class="headerlink" href="#nvm-dev-pr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_dev_pr">
<span class="target" id="liblightnvmliblightnvm_8h_1ae40775e6f08ef63ed89e42a5c47c0400"></span>void <code class="descname">nvm_dev_pr</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_dev_pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints information about the device associated with the given handle. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle of the device to print information about </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</div>
<div class="section" id="bad-block-management">
<h2>Bad Block Management<a class="headerlink" href="#bad-block-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nvm-bbt">
<h3>nvm_bbt<a class="headerlink" href="#nvm-bbt" title="Permalink to this headline">¶</a></h3>
<dl class="struct">
<dt id="c.nvm_bbt">
<span class="target" id="liblightnvmstructnvm__bbt"></span><em class="property">struct </em><code class="descname">nvm_bbt</code><a class="headerlink" href="#c.nvm_bbt" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of bad-block-table. </p>
<p>The bad-block-table describes block-state of a given LUN</p>
<p><dl class="docutils">
<dt><strong>See</strong></dt>
<dd><a class="reference internal" href="#liblightnvmliblightnvm_8h_1aca47f5add1d8e1c8951a361a5d31f7d0"><span class="std std-ref">nvm_bbt_get</span></a>, <a class="reference internal" href="#liblightnvmliblightnvm_8h_1abea7671988dc9fbd79fa8bc83f80f35b"><span class="std std-ref">nvm_bbt_set</span></a>, <a class="reference internal" href="#liblightnvmliblightnvm_8h_1a2dbbb2e922bdca909354da7f2ecba9a3"><span class="std std-ref">nvm_bbt_mark</span></a>, <a class="reference internal" href="#liblightnvmliblightnvm_8h_1aeeef11a1285a6fa2695a3367afdb3770"><span class="std std-ref">nvm_bbt_free</span></a>, and <a class="reference internal" href="#liblightnvmliblightnvm_8h_1a256e840dbba8138686b832c0623d5362"><span class="std std-ref">nvm_bbt_pr</span></a> </dd>
</dl>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt id="c.nvm_bbt::dev">
<span class="target" id="liblightnvmstructnvm__bbt_1a441963eec2feeca3adcd3ac530da0dca"></span>struct <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>* <code class="descname">dev</code><a class="headerlink" href="#c.nvm_bbt::dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Device on which the bbt resides. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_bbt::addr">
<span class="target" id="liblightnvmstructnvm__bbt_1aadf9a370ec90d297d60ca3729d912577"></span>struct <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a> <code class="descname">addr</code><a class="headerlink" href="#c.nvm_bbt::addr" title="Permalink to this definition">¶</a></dt>
<dd><p>Address of the LUN described by the bbt. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_bbt::blks">
<span class="target" id="liblightnvmstructnvm__bbt_1a99508e52173934f18a875daae4ac7bb0"></span>uint8_t* <code class="descname">blks</code><a class="headerlink" href="#c.nvm_bbt::blks" title="Permalink to this definition">¶</a></dt>
<dd><p>Array containing block status for each block in LUN. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_bbt::nblks">
<span class="target" id="liblightnvmstructnvm__bbt_1abfd11ee021cbd2dfbad04a38f536eceb"></span>uint64_t <code class="descname">nblks</code><a class="headerlink" href="#c.nvm_bbt::nblks" title="Permalink to this definition">¶</a></dt>
<dd><p>Length of the bad block array. </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="nvm-bbt-get">
<h3>nvm_bbt_get<a class="headerlink" href="#nvm-bbt-get" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_bbt_get">
<span class="target" id="liblightnvmliblightnvm_8h_1aca47f5add1d8e1c8951a361a5d31f7d0"></span>struct <a class="reference internal" href="#c.nvm_bbt" title="nvm_bbt">nvm_bbt</a>* <code class="descname">nvm_bbt_get</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addr</em>, struct  <a class="reference internal" href="#c.nvm_ret" title="nvm_ret">nvm_ret</a>  *<em>&nbsp;ret</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_bbt_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves a bad block table from device. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>On success, a pointer to the bad-block-table is returned. On error, NULL is returned, <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error and ret filled with lower-level result codes </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device on which to retrieve a bad-block-table from </li>
<li><code class="docutils literal"><span class="pre">addr</span></code>: Address of the LUN to retrieve bad-block-table for </li>
<li><code class="docutils literal"><span class="pre">ret</span></code>: Pointer to structure in which to store lower-level status and result. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-bbt-set">
<h3>nvm_bbt_set<a class="headerlink" href="#nvm-bbt-set" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_bbt_set">
<span class="target" id="liblightnvmliblightnvm_8h_1abea7671988dc9fbd79fa8bc83f80f35b"></span>int <code class="descname">nvm_bbt_set</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_bbt" title="nvm_bbt">nvm_bbt</a>  *<em>&nbsp;bbt</em>, struct  <a class="reference internal" href="#c.nvm_ret" title="nvm_ret">nvm_ret</a>  *<em>&nbsp;ret</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_bbt_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the bad-block-table on given device using the provided bbt. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>On success, the number of updated entries is returned. On error, -1 is returned, <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error and ret filled with with lower-level result codes </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device on which to update a bad-block-table </li>
<li><code class="docutils literal"><span class="pre">bbt</span></code>: The bbt to write to device </li>
<li><code class="docutils literal"><span class="pre">ret</span></code>: Pointer to structure in which to store lower-level status and result. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-bbt-mark">
<h3>nvm_bbt_mark<a class="headerlink" href="#nvm-bbt-mark" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_bbt_mark">
<span class="target" id="liblightnvmliblightnvm_8h_1a2dbbb2e922bdca909354da7f2ecba9a3"></span>int <code class="descname">nvm_bbt_mark</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addrs[]</em>, int<em>&nbsp;naddrs</em>, uint16_t<em>&nbsp;flags</em>, struct  <a class="reference internal" href="#c.nvm_ret" title="nvm_ret">nvm_ret</a>  *<em>&nbsp;ret</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_bbt_mark" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark addresses good, bad, or host-bad. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>The addresses given to this function are interpreted as block addresses, in contrast to <code class="docutils literal"><span class="pre">nvm_addr_write</span></code>, and <code class="docutils literal"><span class="pre">nvm_addr_read</span></code> which interpret addresses and sector addresses.</dd>
<dt><strong>See</strong></dt>
<dd><code class="docutils literal"><span class="pre">enum</span> <span class="pre">nvm_bbt_state</span></code></dd>
<dt><strong>Return</strong></dt>
<dd>On success, 0 is returned. On error, -1 is returned, <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error and ret filled with lower-level result codes </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to the device on which to mark </li>
<li><code class="docutils literal"><span class="pre">addrs</span></code>: Array of memory address </li>
<li><code class="docutils literal"><span class="pre">naddrs</span></code>: Length of memory address array </li>
<li><code class="docutils literal"><span class="pre">flags</span></code>: 0x0 = GOOD, 0x1 = BAD, 0x2 = GROWN_BAD, as well as access mode </li>
<li><code class="docutils literal"><span class="pre">ret</span></code>: Pointer to structure in which to store lower-level status and result. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-bbt-free">
<h3>nvm_bbt_free<a class="headerlink" href="#nvm-bbt-free" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_bbt_free">
<span class="target" id="liblightnvmliblightnvm_8h_1aeeef11a1285a6fa2695a3367afdb3770"></span>void <code class="descname">nvm_bbt_free</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_bbt" title="nvm_bbt">nvm_bbt</a>  *<em>&nbsp;bbt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_bbt_free" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroys a given bad-block-table. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">bbt</span></code>: The bad-block-table to destroy </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-bbt-pr">
<h3>nvm_bbt_pr<a class="headerlink" href="#nvm-bbt-pr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_bbt_pr">
<span class="target" id="liblightnvmliblightnvm_8h_1a256e840dbba8138686b832c0623d5362"></span>void <code class="descname">nvm_bbt_pr</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_bbt" title="nvm_bbt">nvm_bbt</a>  *<em>&nbsp;bbt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_bbt_pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a humanly readable representation of the given bad-block-table. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">bbt</span></code>: The bad-block-table to print </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-bbt-state-pr">
<h3>nvm_bbt_state_pr<a class="headerlink" href="#nvm-bbt-state-pr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_bbt_state_pr">
<span class="target" id="liblightnvmliblightnvm_8h_1a0d57cde71f4ee77503a443daca3b3261"></span>void <code class="descname">nvm_bbt_state_pr</code><span class="sig-paren">(</span>int<em>&nbsp;state</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_bbt_state_pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a humanly readable representation of the given bad-block-table state. </p>
</dd></dl>

</div>
</div>
<div class="section" id="physical-addressing">
<h2>Physical Addressing<a class="headerlink" href="#physical-addressing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nvm-addr">
<h3>nvm_addr<a class="headerlink" href="#nvm-addr" title="Permalink to this headline">¶</a></h3>
<dl class="struct">
<dt id="c.nvm_addr">
<span class="target" id="liblightnvmstructnvm__addr"></span><em class="property">struct </em><code class="descname">nvm_addr</code><a class="headerlink" href="#c.nvm_addr" title="Permalink to this definition">¶</a></dt>
<dd><p>Encapsulation of generic physical nvm addressing. </p>
<p>Although the user need not worry about device specific address formats the user has to know and respect addressing within device specific geometric boundaries.</p>
<p>For that purpose one can use the <code class="docutils literal"><span class="pre">struct</span> <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref"><span class="pre">nvm_geo</span></span></a></code> of an <code class="docutils literal"><span class="pre">struct</span> <a class="reference internal" href="#liblightnvmstructnvm__dev"><span class="std std-ref"><span class="pre">nvm_dev</span></span></a></code> to obtain device specific geometries. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt id="c.nvm_addr::blk">
<span class="target" id="liblightnvmstructnvm__addr_1a2cf2b9213e60ea112ced2fbc01010a1e"></span>uint64_t <code class="descname">blk</code><a class="headerlink" href="#c.nvm_addr::blk" title="Permalink to this definition">¶</a></dt>
<dd><p>Block address. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::pg">
<span class="target" id="liblightnvmstructnvm__addr_1a1a8528fb9f2d7dbbf9407be00caccaba"></span>uint64_t <code class="descname">pg</code><a class="headerlink" href="#c.nvm_addr::pg" title="Permalink to this definition">¶</a></dt>
<dd><p>Page address. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::sec">
<span class="target" id="liblightnvmstructnvm__addr_1ae14fa3225942f6153ecfb3a23f6faf20"></span>uint64_t <code class="descname">sec</code><a class="headerlink" href="#c.nvm_addr::sec" title="Permalink to this definition">¶</a></dt>
<dd><p>Sector address. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::pl">
<span class="target" id="liblightnvmstructnvm__addr_1af438cf03bb9bedfcae773e61c595be49"></span>uint64_t <code class="descname">pl</code><a class="headerlink" href="#c.nvm_addr::pl" title="Permalink to this definition">¶</a></dt>
<dd><p>Plane address. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::lun">
<span class="target" id="liblightnvmstructnvm__addr_1a9c7583b5aa40f35c56ea0b3379c78fe4"></span>uint64_t <code class="descname">lun</code><a class="headerlink" href="#c.nvm_addr::lun" title="Permalink to this definition">¶</a></dt>
<dd><p>LUN address. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::ch">
<span class="target" id="liblightnvmstructnvm__addr_1ad040380153fc5f8fc36a88fd1af854b8"></span>uint64_t <code class="descname">ch</code><a class="headerlink" href="#c.nvm_addr::ch" title="Permalink to this definition">¶</a></dt>
<dd><p>Channel address. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::rsvd">
<span class="target" id="liblightnvmstructnvm__addr_1ad84fc8fa58bd2a0e64bdbad8f25927da"></span>uint64_t <code class="descname">rsvd</code><a class="headerlink" href="#c.nvm_addr::rsvd" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserved. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::g">
<span class="target" id="liblightnvmstructnvm__addr_1a63dec1c230bc6e8f7ff6a12869c92720"></span>struct <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a>::&#64;0::&#64;2  <code class="descname">g</code><a class="headerlink" href="#c.nvm_addr::g" title="Permalink to this definition">¶</a></dt>
<dd><p>Address packing and geometric accessors. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::line">
<span class="target" id="liblightnvmstructnvm__addr_1abdf0985f0aa4735543ca9774d8005cbf"></span>uint64_t <code class="descname">line</code><a class="headerlink" href="#c.nvm_addr::line" title="Permalink to this definition">¶</a></dt>
<dd><p>Address line. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::is_cached">
<span class="target" id="liblightnvmstructnvm__addr_1aee664db84a723ccd91dca7b34cf4a730"></span>uint64_t <code class="descname">is_cached</code><a class="headerlink" href="#c.nvm_addr::is_cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache hint? </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::c">
<span class="target" id="liblightnvmstructnvm__addr_1ac6ba4c5d62f92125792cfd9e92600d90"></span>struct <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a>::&#64;0::&#64;3  <code class="descname">c</code><a class="headerlink" href="#c.nvm_addr::c" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="variable">
<dt id="c.nvm_addr::ppa">
<span class="target" id="liblightnvmstructnvm__addr_1af8c61ffaabf8869d6974df13ab2ea495"></span>uint64_t <code class="descname">ppa</code><a class="headerlink" href="#c.nvm_addr::ppa" title="Permalink to this definition">¶</a></dt>
<dd><p>Address as ppa. </p>
</dd></dl>

<dl class="variable">
<dt id="c.1">
<span class="target" id="liblightnvmstructnvm__addr_1a8366ef619429d0c3cba56f1c9409a42d"></span>union <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a>::&#64;0 <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a>::&#64;<code class="descname">1</code><a class="headerlink" href="#c.1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="nvm-ret">
<h3>nvm_ret<a class="headerlink" href="#nvm-ret" title="Permalink to this headline">¶</a></h3>
<dl class="struct">
<dt id="c.nvm_ret">
<span class="target" id="liblightnvmstructnvm__ret"></span><em class="property">struct </em><code class="descname">nvm_ret</code><a class="headerlink" href="#c.nvm_ret" title="Permalink to this definition">¶</a></dt>
<dd><p>Encapsulation and representation of lower-level error conditions. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt id="c.nvm_ret::status">
<span class="target" id="liblightnvmstructnvm__ret_1ab31dcc186ef5c43f1d272feefd655358"></span>uint64_t <code class="descname">status</code><a class="headerlink" href="#c.nvm_ret::status" title="Permalink to this definition">¶</a></dt>
<dd><p>NVMe command status / completion bits. </p>
</dd></dl>

<dl class="variable">
<dt id="c.nvm_ret::result">
<span class="target" id="liblightnvmstructnvm__ret_1a7e8d58562b49876088f0ce77494fac46"></span>uint32_t <code class="descname">result</code><a class="headerlink" href="#c.nvm_ret::result" title="Permalink to this definition">¶</a></dt>
<dd><p>NVMe command error codes. </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="nvm-addr-erase">
<h3>nvm_addr_erase<a class="headerlink" href="#nvm-addr-erase" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_erase">
<span class="target" id="liblightnvmliblightnvm_8h_1a1b77997985a372c961d79d09340b4108"></span>ssize_t <code class="descname">nvm_addr_erase</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addrs[]</em>, int<em>&nbsp;naddrs</em>, uint16_t<em>&nbsp;flags</em>, struct  <a class="reference internal" href="#c.nvm_ret" title="nvm_ret">nvm_ret</a>  *<em>&nbsp;ret</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_erase" title="Permalink to this definition">¶</a></dt>
<dd><p>Erase nvm at given addresses. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>The addresses given to this function are interpreted as block addresses, in contrast to <code class="docutils literal"><span class="pre">nvm_addr_mark</span></code>, <code class="docutils literal"><span class="pre">nvm_addr_write</span></code>, and <code class="docutils literal"><span class="pre">nvm_addr_read</span></code> for which the address is interpreted as a sector address.</dd>
<dt><strong>Return</strong></dt>
<dd>0 on success. On error: returns -1, sets <code class="docutils literal"><span class="pre">errno</span></code> accordingly, and fills <code class="docutils literal"><span class="pre">ret</span></code> with lower-level result and status codes </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to the device on which to erase </li>
<li><code class="docutils literal"><span class="pre">addrs</span></code>: Array of memory address </li>
<li><code class="docutils literal"><span class="pre">naddrs</span></code>: Length of array of memory addresses </li>
<li><code class="docutils literal"><span class="pre">flags</span></code>: Access mode </li>
<li><code class="docutils literal"><span class="pre">ret</span></code>: Pointer to structure in which to store lower-level status and result. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-read">
<h3>nvm_addr_read<a class="headerlink" href="#nvm-addr-read" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_read">
<span class="target" id="liblightnvmliblightnvm_8h_1a6a7ea06fc56c5492a758542849c366ef"></span>ssize_t <code class="descname">nvm_addr_read</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addrs[]</em>, int<em>&nbsp;naddrs</em>, void *<em>&nbsp;buf</em>, void *<em>&nbsp;meta</em>, uint16_t<em>&nbsp;flags</em>, struct  <a class="reference internal" href="#c.nvm_ret" title="nvm_ret">nvm_ret</a>  *<em>&nbsp;ret</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read content of nvm at addresses into buf. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>The addresses given to this function are interpreted as sector addresses, in contrast to <code class="docutils literal"><span class="pre">nvm_addr_mark</span></code> and <code class="docutils literal"><span class="pre">nvm_addr_erase</span></code> for which the address is interpreted as a block address.</dd>
<dt><strong>Return</strong></dt>
<dd>0 on success. On error: returns -1, sets <code class="docutils literal"><span class="pre">errno</span></code> accordingly, and fills <code class="docutils literal"><span class="pre">ret</span></code> with lower-level result and status codes </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to the device on which to erase </li>
<li><code class="docutils literal"><span class="pre">addrs</span></code>: List of memory address </li>
<li><code class="docutils literal"><span class="pre">naddrs</span></code>: Length of array of memory addresses </li>
<li><code class="docutils literal"><span class="pre">buf</span></code>: Buffer to store result of read into, must be aligned to device geo.vpage_nbytes and size equal to <code class="docutils literal"><span class="pre">naddrs</span> <span class="pre">*</span> <span class="pre">geo.nbytes</span></code> </li>
<li><code class="docutils literal"><span class="pre">meta</span></code>: Buffer to store content of metadata, must be of size equal to device <code class="docutils literal"><span class="pre">naddrs</span> <span class="pre">*</span> <span class="pre">geo.meta_nbytes</span></code> </li>
<li><code class="docutils literal"><span class="pre">flags</span></code>: Access mode </li>
<li><code class="docutils literal"><span class="pre">ret</span></code>: Pointer to structure in which to store lower-level status and result. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-write">
<h3>nvm_addr_write<a class="headerlink" href="#nvm-addr-write" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_write">
<span class="target" id="liblightnvmliblightnvm_8h_1a3e1e58dc35ba7482dfafc7bec0464d94"></span>ssize_t <code class="descname">nvm_addr_write</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addrs[]</em>, int<em>&nbsp;naddrs</em>, const void *<em>&nbsp;buf</em>, const void *<em>&nbsp;meta</em>, uint16_t<em>&nbsp;flags</em>, struct  <a class="reference internal" href="#c.nvm_ret" title="nvm_ret">nvm_ret</a>  *<em>&nbsp;ret</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write content of buf to nvm at address(es) </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>The addresses given to this function are interpreted as sector addresses, in contrast to nvm_addr_mark and nvm_addr_erase for which the address is interpreted as a block address.</dd>
<dt><strong>Return</strong></dt>
<dd>0 on success. On error: returns -1, sets <code class="docutils literal"><span class="pre">errno</span></code> accordingly, and fills <code class="docutils literal"><span class="pre">ret</span></code> with lower-level result and status codes </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to the device on which to erase </li>
<li><code class="docutils literal"><span class="pre">addrs</span></code>: Array of memory address </li>
<li><code class="docutils literal"><span class="pre">naddrs</span></code>: Length of array of memory addresses </li>
<li><code class="docutils literal"><span class="pre">buf</span></code>: The buffer which content to write, must be aligned to device geo.vpage_nbytes and size equal to <code class="docutils literal"><span class="pre">naddrs</span> <span class="pre">*</span> <span class="pre">geo.nbytes</span></code> </li>
<li><code class="docutils literal"><span class="pre">meta</span></code>: Buffer containing metadata, must be of size equal to device <code class="docutils literal"><span class="pre">naddrs</span> <span class="pre">*</span> <span class="pre">geo.meta_nbytes</span></code> </li>
<li><code class="docutils literal"><span class="pre">flags</span></code>: Access mode </li>
<li><code class="docutils literal"><span class="pre">ret</span></code>: Pointer to structure in which to store lower-level status and result. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-check">
<h3>nvm_addr_check<a class="headerlink" href="#nvm-addr-check" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_check">
<span class="target" id="liblightnvmliblightnvm_8h_1a159547b8ca24e872b999877407bffda9"></span>int <code class="descname">nvm_addr_check</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addr</em>, const struct  <a class="reference internal" href="#c.nvm_geo" title="nvm_geo">nvm_geo</a>  *<em>&nbsp;geo</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the given address exceeds bounds of the given geometry. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>A mask of exceeded boundaries </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">addr</span></code>: The addr to check </li>
<li><code class="docutils literal"><span class="pre">geo</span></code>: The geometric bounds to check the given address against </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-gen2dev">
<h3>nvm_addr_gen2dev<a class="headerlink" href="#nvm-addr-gen2dev" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_gen2dev">
<span class="target" id="liblightnvmliblightnvm_8h_1add18460eeec07ae8ce6b9f471ca83a9e"></span>uint64_t <code class="descname">nvm_addr_gen2dev</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_gen2dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a given physical address generic-format to device-format. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Physical address on device-format </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device which address format to convert to </li>
<li><code class="docutils literal"><span class="pre">addr</span></code>: The physical address on generic-format to convert </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-dev2gen">
<h3>nvm_addr_dev2gen<a class="headerlink" href="#nvm-addr-dev2gen" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_dev2gen">
<span class="target" id="liblightnvmliblightnvm_8h_1a7dd099dc686dac92081bd7c4c37a5895"></span>struct <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a> <code class="descname">nvm_addr_dev2gen</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, uint64_t<em>&nbsp;addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_dev2gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a given physical address on device-format to generic-format. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Physical address on generic-format </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device which address format to convert from </li>
<li><code class="docutils literal"><span class="pre">addr</span></code>: The physical address on device-format to convert </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-gen2lba">
<h3>nvm_addr_gen2lba<a class="headerlink" href="#nvm-addr-gen2lba" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_gen2lba">
<span class="target" id="liblightnvmliblightnvm_8h_1af7269ce2b8cd9d32b033e79f8439f2e5"></span>uint64_t <code class="descname">nvm_addr_gen2lba</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_gen2lba" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a given physical address on generic-format to LBA offset. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Logical address as LBA offset </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to device which mapping information to use </li>
<li><code class="docutils literal"><span class="pre">addr</span></code>: The physical address on generic-format to convert </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-lba2gen">
<h3>nvm_addr_lba2gen<a class="headerlink" href="#nvm-addr-lba2gen" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_lba2gen">
<span class="target" id="liblightnvmliblightnvm_8h_1a9cb32c309e0d6b7c23a455fa97d303be"></span>struct <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a> <code class="descname">nvm_addr_lba2gen</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, uint64_t<em>&nbsp;off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_lba2gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a given LBA offset to physical address on generic-format. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Physical address on generic-format </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to device which mapping information to use </li>
<li><code class="docutils literal"><span class="pre">off</span></code>: Logical address as LBA offset to convert </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-gen2off">
<h3>nvm_addr_gen2off<a class="headerlink" href="#nvm-addr-gen2off" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_gen2off">
<span class="target" id="liblightnvmliblightnvm_8h_1a480ec1815404e58f793ea59794fa912f"></span>uint64_t <code class="descname">nvm_addr_gen2off</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_gen2off" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a given physical address on generic-format to byte offset. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Logical address as byte offset </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to device which mapping information to use </li>
<li><code class="docutils literal"><span class="pre">addr</span></code>: The physical address on generic-format to convert </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-off2gen">
<h3>nvm_addr_off2gen<a class="headerlink" href="#nvm-addr-off2gen" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_off2gen">
<span class="target" id="liblightnvmliblightnvm_8h_1aee7bdce116af860a64aaea40c99152eb"></span>struct <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a> <code class="descname">nvm_addr_off2gen</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, uint64_t<em>&nbsp;off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_off2gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a given byte offset to physical address on generic-format. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Physical address on generic-format </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: Handle to device which mapping information to use </li>
<li><code class="docutils literal"><span class="pre">off</span></code>: Logical address as byte offset to convert </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-addr-pr">
<h3>nvm_addr_pr<a class="headerlink" href="#nvm-addr-pr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_addr_pr">
<span class="target" id="liblightnvmliblightnvm_8h_1a7be914f85027e87b98d1d80148874ff7"></span>void <code class="descname">nvm_addr_pr</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_addr_pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a humanly readable representation of the given address. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">addr</span></code>: The address to print </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</div>
<div class="section" id="logical-addressing">
<h2>Logical Addressing<a class="headerlink" href="#logical-addressing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nvm-lba-pread">
<h3>nvm_lba_pread<a class="headerlink" href="#nvm-lba-pread" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_lba_pread">
<span class="target" id="liblightnvmliblightnvm_8h_1a61f4b316bb5d1b434d2c73ad82e48c10"></span>ssize_t <code class="descname">nvm_lba_pread</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, void *<em>&nbsp;buf</em>, size_t<em>&nbsp;count</em>, off_t<em>&nbsp;offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_lba_pread" title="Permalink to this definition">¶</a></dt>
<dd><p>Read up to <code class="docutils literal"><span class="pre">count</span></code> bytes from the given <code class="docutils literal"><span class="pre">device</span></code> starting at the given <code class="docutils literal"><span class="pre">offset</span></code> into the given buffer starting at <code class="docutils literal"><span class="pre">buf</span></code>. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This is equivalent to <code class="docutils literal"><span class="pre">pread</span></code>/<code class="docutils literal"><span class="pre">pwrite</span></code> except it takes the opaque <code class="docutils literal"><span class="pre">struct</span> <a class="reference internal" href="#liblightnvmstructnvm__dev"><span class="std std-ref"><span class="pre">nvm_dev</span></span></a> <span class="pre">*</span></code> instead of a file descriptor </dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-lba-pwrite">
<h3>nvm_lba_pwrite<a class="headerlink" href="#nvm-lba-pwrite" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_lba_pwrite">
<span class="target" id="liblightnvmliblightnvm_8h_1ac594de405f8d471266acf536417250ce"></span>ssize_t <code class="descname">nvm_lba_pwrite</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, const void *<em>&nbsp;buf</em>, size_t<em>&nbsp;count</em>, off_t<em>&nbsp;offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_lba_pwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Write up to <code class="docutils literal"><span class="pre">count</span></code> bytes from the buffer starting at <code class="docutils literal"><span class="pre">buf</span></code> to the given device <code class="docutils literal"><span class="pre">dev</span></code> at given <code class="docutils literal"><span class="pre">offset</span></code>. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This is equivalent to <code class="docutils literal"><span class="pre">pread</span></code>/<code class="docutils literal"><span class="pre">pwrite</span></code> except it takes the opaque <code class="docutils literal"><span class="pre">struct</span> <a class="reference internal" href="#liblightnvmstructnvm__dev"><span class="std std-ref"><span class="pre">nvm_dev</span></span></a> <span class="pre">*</span></code> instead of a file descriptor </dd>
</dl>
</p>
</dd></dl>

</div>
</div>
<div class="section" id="virtual-block">
<h2>Virtual Block<a class="headerlink" href="#virtual-block" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nvm-vblk">
<h3>nvm_vblk<a class="headerlink" href="#nvm-vblk" title="Permalink to this headline">¶</a></h3>
<dl class="struct">
<dt id="c.nvm_vblk">
<span class="target" id="liblightnvmstructnvm__vblk"></span><em class="property">struct </em><code class="descname">nvm_vblk</code><a class="headerlink" href="#c.nvm_vblk" title="Permalink to this definition">¶</a></dt>
<dd><p>Virtual block abstraction. </p>
<p>Facilitates a libc-like read/write and a system-like <code class="docutils literal"><span class="pre">pread</span></code>/<code class="docutils literal"><span class="pre">pwrite</span></code> interface to perform I/O on a virtual block spanning multiple blocks of physical NVM.</p>
<p>Consult the <code class="docutils literal"><span class="pre">nvm_vblk_alloc</span></code>, <code class="docutils literal"><span class="pre">nvm_vblk_alloc_span</span></code>, and <code class="docutils literal"><span class="pre">nvm_vblk_alloc_set</span></code> for the different spans.</p>
<p><dl class="docutils">
<dt><strong>See</strong></dt>
<dd><p class="first"><a class="reference internal" href="#liblightnvmliblightnvm_8h_1a6ecf89405c9c5f0f35c114931bdcc8ae"><span class="std std-ref">nvm_vblk_alloc</span></a> </p>
<p>nvm_vblk_span </p>
<p class="last">nvm_vblk_set </p>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-erase">
<h3>nvm_vblk_erase<a class="headerlink" href="#nvm-vblk-erase" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_erase">
<span class="target" id="liblightnvmliblightnvm_8h_1ad61923687309e99e0999344fcdab71c8"></span>ssize_t <code class="descname">nvm_vblk_erase</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_erase" title="Permalink to this definition">¶</a></dt>
<dd><p>Erase a virtual block. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>On success, the number of bytes erased is returned. On error, -1 is returned and <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The virtual block to erase </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-read">
<h3>nvm_vblk_read<a class="headerlink" href="#nvm-vblk-read" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_read">
<span class="target" id="liblightnvmliblightnvm_8h_1a7c6feddfd061158168de5ca63ac44275"></span>ssize_t <code class="descname">nvm_vblk_read</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em>, void *<em>&nbsp;buf</em>, size_t<em>&nbsp;count</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read from a virtual block. </p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-write">
<h3>nvm_vblk_write<a class="headerlink" href="#nvm-vblk-write" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_write">
<span class="target" id="liblightnvmliblightnvm_8h_1a85d3d7291444aec42241baa5ced95a39"></span>ssize_t <code class="descname">nvm_vblk_write</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em>, const void *<em>&nbsp;buf</em>, size_t<em>&nbsp;count</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to a virtual block. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>buf must be aligned to device geometry, see struct <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref">nvm_geo</span></a> and nvm_buf_alloc count must be a multiple of min-size, see struct <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref">nvm_geo</span></a> do not mix use of nvm_vblk_pwrite with nvm_vblk_write on the same virtual block</dd>
<dt><strong>Return</strong></dt>
<dd>On success, the number of bytes written is returned and vblk internal position is updated. On error, -1 is returned and <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The virtual block to write to </li>
<li><code class="docutils literal"><span class="pre">buf</span></code>: Write content starting at buf </li>
<li><code class="docutils literal"><span class="pre">count</span></code>: The number of bytes to write </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-pad">
<h3>nvm_vblk_pad<a class="headerlink" href="#nvm-vblk-pad" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_pad">
<span class="target" id="liblightnvmliblightnvm_8h_1afb47188711a2ec1dd1fa7b2754b4a57c"></span>ssize_t <code class="descname">nvm_vblk_pad</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Pad the virtual block with synthetic data. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>Assumes that you have used nvm_vblk_write and now want to fill the remaining virtual block in order to meet block write-before-read constraints</dd>
<dt><strong>Return</strong></dt>
<dd>On success, the number of bytes padded is returned and internal position is updated. On error, -1 is returned and <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The virtual block to pad </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-pread">
<h3>nvm_vblk_pread<a class="headerlink" href="#nvm-vblk-pread" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_pread">
<span class="target" id="liblightnvmliblightnvm_8h_1a57c35c8050d0593ff26053958b5a8adf"></span>ssize_t <code class="descname">nvm_vblk_pread</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em>, void *<em>&nbsp;buf</em>, size_t<em>&nbsp;count</em>, size_t<em>&nbsp;offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_pread" title="Permalink to this definition">¶</a></dt>
<dd><p>Read from a virtual block at given offset. </p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-pwrite">
<h3>nvm_vblk_pwrite<a class="headerlink" href="#nvm-vblk-pwrite" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_pwrite">
<span class="target" id="liblightnvmliblightnvm_8h_1a97d743b3a7a4c3db4b359c74dbf8237c"></span>ssize_t <code class="descname">nvm_vblk_pwrite</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em>, const void *<em>&nbsp;buf</em>, size_t<em>&nbsp;count</em>, size_t<em>&nbsp;offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_pwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to a virtual block at a given offset. </p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>buf must be aligned to device geometry, see struct <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref">nvm_geo</span></a> and nvm_buf_alloc count must be a multiple of min-size, see struct <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref">nvm_geo</span></a> offset must be a multiple of min-size, see struct <a class="reference internal" href="#liblightnvmstructnvm__geo"><span class="std std-ref">nvm_geo</span></a> do not mix use of nvm_vblk_pwrite with nvm_vblk_write on the same virtual block</dd>
<dt><strong>Return</strong></dt>
<dd>On success, the number of bytes written is returned. On error, -1 is returned and <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The virtual block to write to </li>
<li><code class="docutils literal"><span class="pre">buf</span></code>: Write content starting at buf </li>
<li><code class="docutils literal"><span class="pre">count</span></code>: The number of bytes to write </li>
<li><code class="docutils literal"><span class="pre">offset</span></code>: Start writing offset bytes within virtual block </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-alloc">
<h3>nvm_vblk_alloc<a class="headerlink" href="#nvm-vblk-alloc" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_alloc">
<span class="target" id="liblightnvmliblightnvm_8h_1a6ecf89405c9c5f0f35c114931bdcc8ae"></span>struct <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>* <code class="descname">nvm_vblk_alloc</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_alloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a virtual block (spanning planes) </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>On success, an opaque pointer to the initialized virtual block is returned. On error, NULL and <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device on which the virtual block resides </li>
<li><code class="docutils literal"><span class="pre">addr</span></code>: Address of the virtual block</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-alloc-set">
<h3>nvm_vblk_alloc_set<a class="headerlink" href="#nvm-vblk-alloc-set" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_alloc_set">
<span class="target" id="liblightnvmliblightnvm_8h_1adada133df917ccc2e20dbfd18079b593"></span>struct <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>* <code class="descname">nvm_vblk_alloc_set</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, struct  <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a><em>&nbsp;addrs[]</em>, int<em>&nbsp;naddrs</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_alloc_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a virtual block, spanning a given set of physical blocks. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>On success, an opaque pointer to the initialized virtual block is returned. On error, NULL and <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device on which the virtual block resides </li>
<li><code class="docutils literal"><span class="pre">addrs</span></code>: Set of block-addresses forming the virtual block </li>
<li><code class="docutils literal"><span class="pre">naddrs</span></code>: The number of addresses in the address-set</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-alloc-line">
<h3>nvm_vblk_alloc_line<a class="headerlink" href="#nvm-vblk-alloc-line" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_alloc_line">
<span class="target" id="liblightnvmliblightnvm_8h_1a2fe8c7aced82ea70540457c9ee725d69"></span>struct <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>* <code class="descname">nvm_vblk_alloc_line</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_dev" title="nvm_dev">nvm_dev</a>  *<em>&nbsp;dev</em>, int<em>&nbsp;ch_bgn</em>, int<em>&nbsp;ch_end</em>, int<em>&nbsp;lun_bgn</em>, int<em>&nbsp;lun_end</em>, int<em>&nbsp;blk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_alloc_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a virtual block (spanning planes, channels, and LUNs) </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>On success, an opaque pointer to the initialized virtual block is returned. On error, NULL and <code class="docutils literal"><span class="pre">errno</span></code> set to indicate the error. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">dev</span></code>: The device on which the virtual block resides </li>
<li><code class="docutils literal"><span class="pre">ch_bgn</span></code>: Beginning of the channel span, as inclusive index </li>
<li><code class="docutils literal"><span class="pre">ch_end</span></code>: End of the channel span, as inclusive index </li>
<li><code class="docutils literal"><span class="pre">lun_bgn</span></code>: Beginning of the LUN span, as inclusive index </li>
<li><code class="docutils literal"><span class="pre">lun_end</span></code>: End of the LUN span, as inclusive index </li>
<li><code class="docutils literal"><span class="pre">blk</span></code>: Block index</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-free">
<h3>nvm_vblk_free<a class="headerlink" href="#nvm-vblk-free" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_free">
<span class="target" id="liblightnvmliblightnvm_8h_1ac3376a44e79e1fc321edfc483f17e9b5"></span>void <code class="descname">nvm_vblk_free</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_free" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy a virtual block. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The virtual block to destroy </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-pr">
<h3>nvm_vblk_pr<a class="headerlink" href="#nvm-vblk-pr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_pr">
<span class="target" id="liblightnvmliblightnvm_8h_1af7a10ed9f4afdf308e43901a3cf3c1ae"></span>void <code class="descname">nvm_vblk_pr</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the virtual block in a humanly readable form. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The entity to print information about </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-attr-addrs">
<h3>nvm_vblk_attr_addrs<a class="headerlink" href="#nvm-vblk-attr-addrs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_attr_addrs">
<span class="target" id="liblightnvmliblightnvm_8h_1ade8c682ed081efc434f3972191778a5d"></span>struct <a class="reference internal" href="#c.nvm_addr" title="nvm_addr">nvm_addr</a>* <code class="descname">nvm_vblk_attr_addrs</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_attr_addrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the set of addresses defining the virtual block. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The entity to retrieve information from </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-attr-naddrs">
<h3>nvm_vblk_attr_naddrs<a class="headerlink" href="#nvm-vblk-attr-naddrs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_attr_naddrs">
<span class="target" id="liblightnvmliblightnvm_8h_1a7ad155e528ee57bd84c158ce21a4aec2"></span>int <code class="descname">nvm_vblk_attr_naddrs</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_attr_naddrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the number of address in the address set of the virtual block. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The entity to retrieve information from </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-attr-pos-read">
<h3>nvm_vblk_attr_pos_read<a class="headerlink" href="#nvm-vblk-attr-pos-read" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_attr_pos_read">
<span class="target" id="liblightnvmliblightnvm_8h_1abc204a074aa45735ebee8444b3703e33"></span>size_t <code class="descname">nvm_vblk_attr_pos_read</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_attr_pos_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the current cursor position for read to the virtual block. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The entity to retrieve information from </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nvm-vblk-attr-pos-write">
<h3>nvm_vblk_attr_pos_write<a class="headerlink" href="#nvm-vblk-attr-pos-write" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.nvm_vblk_attr_pos_write">
<span class="target" id="liblightnvmliblightnvm_8h_1a46f516e7530b6efe2081bf8cd774f84a"></span>size_t <code class="descname">nvm_vblk_attr_pos_write</code><span class="sig-paren">(</span>struct  <a class="reference internal" href="#c.nvm_vblk" title="nvm_vblk">nvm_vblk</a>  *<em>&nbsp;vblk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.nvm_vblk_attr_pos_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the current cursor position for writes to the virtual block. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">vblk</span></code>: The entity to retrieve information from </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.html" class="btn btn-neutral float-right" title="Command-Line Interface" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="background.html" class="btn btn-neutral" title="Background" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, LightNVM.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>